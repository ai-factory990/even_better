# 현재 UX 문제점 및 개선사항
## 즉시 해결해야 할 사용자 경험 이슈들

---

## 🚨 **긴급 해결 이슈**

### **Issue #1: 채팅 입력 방해 문제**
**문제**: 채팅을 치려고 누르면 최근검색이 올라와서 화면을 가림
**원인**: 키보드 오버랩 + 최근검색 UI 위치 문제
**해결방안**: 
- 최근검색 위치를 다른 곳으로 이동
- 키보드 올라올 때 UI 레이아웃 조정
- 채팅 입력창에 포커스시 최근검색 숨김

### **Issue #2: 크롤링 개수 제한 및 UI 문제**
**문제**: 
- 실제로는 30개만 크롤링하면서 조절하는 것처럼 보임
- 사용자가 크롤링 개수를 선택할 수 없음
- URL 입력 위치가 적절하지 않음

**해결방안**:
- URL 입력창을 화면 상단으로 이동
- 크롤링 개수 슬라이더 추가 (100-1000개)
- 실제 크롤링 개수와 UI 표시 일치

### **Issue #3: 앱 구조 및 네비게이션 부족**
**문제**:
- 단일 화면 구조로 확장성 부족
- 오늘의 특가 기능 없음
- 탭 네비게이션 없음

**해결방안**:
- 3탭 구조로 전환 (홈/채팅/마이페이지)
- 오늘의 특가 탭 추가
- 아이콘 기반 하단 네비게이션

# 리뷰톡 앱 구조 다이어그램
## ASCII 텍스트로 표현한 완전한 앱 구조

---

## 📱 **전체 앱 구조**

```
┌─────────────────────────────────────────┐
│               리뷰톡 앱                  │
├─────────────────────────────────────────┤
│                                         │
│  ┌─────┐  ┌─────┐  ┌─────┐            │
│  │ 홈  │  │채팅 │  │설정 │            │
│  │ 🏠  │  │ 💬  │  │ ⚙️  │            │
│  └─────┘  └─────┘  └─────┘            │
└─────────────────────────────────────────┘
```

---

## 🏠 **홈 탭 구조**

```
┌─────────────────────────────────────────┐
│                 홈 탭                   │
├─────────────────────────────────────────┤
│ ┌─────────────────────────────────────┐ │
│ │     🔍 직접 상품 분석하기 (최상단)    │ │
│ │                                     │ │
│ │ ┌─────────────────────────────────┐ │ │
│ │ │  다나와 URL 입력창               │ │ │
│ │ │  [___________________________] │ │ │
│ │ └─────────────────────────────────┘ │ │
│ │                                     │ │
│ │ 리뷰 개수: [===|    ] 500개        │ │
│ │                                     │ │
│ │ ┌─────────────────────────────────┐ │ │
│ │ │      🔍 리뷰 분석 시작하기       │ │ │
│ │ └─────────────────────────────────┘ │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │   🏷️ 놓치면 후회하는 오늘의 특가     │ │
│ │                                     │ │
│ │ ┌────────┐ ┌────────┐ ┌────────┐   │ │
│ │ │ 🎧     │ │ 📱     │ │ 💻     │   │ │
│ │ │갤럭시  │ │아이폰15│ │LG그램  │   │ │
│ │ │버즈Pro │ │ 프로   │ │노트북  │   │ │
│ │ │ 15%↓   │ │  5%↓   │ │ 20%↓   │   │ │
│ │ │💬즉시채팅│ │💬즉시채팅│ │💬즉시채팅│   │ │
│ │ └────────┘ └────────┘ └────────┘   │ │
│ │                                     │ │
│ │ ┌────────┐ ┌────────┐ ┌────────┐   │ │
│ │ │ 🧹     │ │ 🖥️     │ │ 🎮     │   │ │
│ │ │다이슨  │ │삼성모니터│ │PS5     │   │ │
│ │ │청소기  │ │        │ │        │   │ │
│ │ │ 12%↓   │ │  8%↓   │ │ 3%↓    │   │ │
│ │ │💬즉시채팅│ │💬즉시채팅│ │💬즉시채팅│   │ │
│ │ └────────┘ └────────┘ └────────┘   │ │
│ └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

---

## 💬 **채팅 탭 구조**

### **메인 화면 (채팅 기록 목록)**

```
┌─────────────────────────────────────────┐
│               채팅 탭                   │
├─────────────────────────────────────────┤
│ 💬 최근 채팅 기록                       │
│ 분석한 상품들과의 대화 기록              │
├─────────────────────────────────────────┤
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 🎧  삼성 갤럭시 버즈2 프로      → │ │
│ │     배터리 지속시간이 어떤가요?     │ │
│ │     2시간 전 • 8개 대화             │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 💻  LG 그램 17인치 노트북       → │ │
│ │     무게는 얼마나 되나요?           │ │
│ │     1일 전 • 12개 대화              │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 🧹  다이슨 V15 무선청소기       → │ │
│ │     소음이 심한가요?               │ │
│ │     3일 전 • 5개 대화               │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 📱  아이폰 15 프로             → │ │
│ │     카메라 성능은 어떤가요?         │ │
│ │     1주일 전 • 15개 대화            │ │
│ └─────────────────────────────────────┘ │
│                                         │
├─────────────────────────────────────────┤
│ ┌─────────────────────────────────────┐ │
│ │        🔍 새 상품 분석하기          │ │
│ └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

### **개별 채팅 화면**

```
┌─────────────────────────────────────────┐
│ ← 🎧 삼성 갤럭시 버즈2 프로             │
│   리뷰 500개 분석 완료                  │
├─────────────────────────────────────────┤
│ 💡 추천 질문:                          │
│ [배터리는?] [음질좋나?] [가격대비?] [단점?]│
├─────────────────────────────────────────┤
│                                         │
│                              ┌─────────┐│
│                              │배터리는  ││
│                              │어떤가요? ││
│                              └─────────┘│
│ ┌─────────────────────────────────────┐ │
│ │ 리뷰를 분석해보니 대부분 5-6시간     │ │
│ │ 연속 사용이 가능하다고 하시네요 👍   │ │
│ │ 하루 종일 써도 여유있다는 의견이     │ │
│ │ 많았어요!                           │ │
│ └─────────────────────────────────────┘ │
│                                         │
│                              ┌─────────┐│
│                              │음질은    ││
│                              │좋나요?   ││
│                              └─────────┘│
│ ┌─────────────────────────────────────┐ │
│ │ 구매하신 분들 의견을 보면 '베이스가  │ │
│ │ 깊고 깔끔하다'는 후기가 많아요 🎵    │ │
│ │ 다만 고음이 조금 아쉽다는 의견도     │ │
│ │ 있었고요.                           │ │
│ └─────────────────────────────────────┘ │
│                                         │
├─────────────────────────────────────────┤
│ [궁금한 점을 물어보세요...      ] [전송]│
└─────────────────────────────────────────┘
```

---

## ⚙️ **설정 탭 구조**

```
┌─────────────────────────────────────────┐
│                설정 탭                  │
├─────────────────────────────────────────┤
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │           📊 이용 통계              │ │
│ │                                     │ │
│ │      23               156           │ │
│ │   분석한 상품        질문한 횟수      │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │            ⚙️ 설정                  │ │
│ │                                     │ │
│ │ 알림 설정            [●     ]       │ │
│ │ 다크 모드            [     ○]       │ │
│ │ 자동 업데이트        [●     ]       │ │
│ │ 캐시 삭제           [   삭제   ]    │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │         📋 최근 분석 기록            │ │
│ │                                     │ │
│ │ 삼성 갤럭시 버즈2 프로      2일 전   │ │
│ │ LG 그램 17인치              3일 전   │ │
│ │ 다이슨 V15 청소기           5일 전   │ │
│ │ 아이폰 15 프로              1주일 전 │ │
│ │                                     │ │
│ │              [더 보기]              │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │            ℹ️ 앱 정보               │ │
│ │                                     │ │
│ │ 앱 버전              v1.0.0         │ │
│ │ 개발자               오히려좋아팀     │ │
│ │ 문의하기             [   연락   ]    │ │
│ │ 리뷰 남기기          [   평가   ]    │ │
│ └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

---

## 🔄 **화면 전환 플로우**

```
홈 탭
  │
  ├─ 직접 URL 입력 → 크롤링 → 새 채팅 생성
  │                          │
  │                          ▼
  │                    채팅 탭 (새 기록 추가)
  │
  └─ 오늘의 특가 클릭 → 즉시 채팅 (이미 분석됨)
                              │
                              ▼
                        개별 채팅 화면

채팅 탭
  │
  ├─ 채팅 기록 클릭 → 개별 채팅 화면
  │                     │
  │                     └─ ← 뒤로가기 → 채팅 목록
  │
  └─ 새 상품 분석하기 → 홈 탭

설정 탭
  │
  ├─ 최근 분석 기록 클릭 → 해당 채팅으로 이동
  │
  └─ 각종 설정 변경
```

---

## 📊 **데이터 흐름**

```
다나와 URL 입력
        │
        ▼
크롤링 시작 (슬라이더로 개수 선택)
        │
        ▼
리뷰 데이터 수집 (100~1000개)
        │
        ▼
AI 벡터 분석 (ChromaDB + OpenAI)
        │
        ▼
채팅 기록에 저장
        │
        ▼
질문-답변 시작
        │
        ▼
대화 기록 누적 저장
        │
        ▼
채팅 탭에서 언제든 재접근
```

---

## 🎯 **주요 UX 포인트**

### **홈 탭**
- ✅ 직접 분석이 최상단 (가장 중요한 기능)
- ✅ 슬라이더로 크롤링 개수 직관적 선택 100개 단위
- ✅ 특가 상품은 즉시 채팅 가능 (미리 크롤링후 db 데이터 저장) 

### **채팅 탭**
- ✅ 카카오톡 구조의 채팅 목록
- ✅ 마지막 대화 + 타임스탬프 표시
- ✅ 개별 채팅 진입 + 뒤로가기

### **설정 탭**
- ✅ 사용 통계로 성취감 제공
- ✅ 기본적인 앱 설정
- ✅ 분석 기록 히스토리


---

## 🎯 **새로운 기능 요구사항**

### **기능 #1: 크롤링 개수 선택 슬라이더**
```
위치: URL 입력창 하단
형태: 슬라이더 (100 ~ 1000개, 100단위)
기본값: 100개
표시: "리뷰 000개 크롤링"
```

### **기능 #2: 오늘의 특가 탭**
```
데이터 소스: 다나와 특가 페이지
크롤링 주기: 매일 1회 (자동)
미리 크롤링: 각 상품별 리뷰 100개씩 DB 저장
사용자 경험: 즉시 채팅 가능 (이미 분석 완료)

크롤링 경로:
1. https://m.danawa.com/leftPanel/cmPick.html
2. #cmPick-category-container
3. #cmPick-category-item-42124 > div > a
4. 각 상품별 리뷰 100개 수집
```


---

## 🛠️ **개발 우선순위**

### **1단계: 긴급 UX 수정 (1시간)**
- [ ] 키보드 올라올 때 화면 가리지 않게 레이아웃 조정
- [ ] URL 입력창 상단 이동

### **2단계: 크롤링 개수 선택 (30분)**
- [ ] 홈에 슬라이더 UI 추가
- [ ] 백엔드 max_reviews 파라미터 연동
- [ ] 실제 크롤링 개수와 유저에게 보이는 크롤링완료 텍스트 일치시키기 

### **3단계: 3탭 구조 전환 (1시간)**
- [ ] BottomNavigationBar 추가
- [ ] 홈/채팅/설정 탭 분리
- [ ] 현재 기능들을 적절한 탭으로 재배치

### **4단계: 오늘의 특가 기능 (2시간)**
- [ ] 다나와 특가 크롤링 스크립트
- [ ] 배치 작업으로 매일 자동 실행
- [ ] 특가 상품 리스트 UI
- [ ] 미리 크롤링된 데이터로 즉시 채팅

---

## 💬 **Cursor 협업 전략**

### **단계별 명령어**

#### **1단계: UX 긴급 수정**
```
@CURRENT_UX_ISSUES.md 의 1단계 문제들을 해결해주세요.

현재 문제:
- 채팅 입력시 최근검색이 화면을 가림
- URL 입력창 위치가 부적절

해결 목표:
- 채팅 입력시 최근검색 숨김
- URL 입력창을 화면 상단으로 이동
- 키보드 대응 개선

기존 기능은 유지하고 UI/UX만 개선해주세요.
```

#### **2단계: 크롤링 개수 슬라이더**
```
URL 입력창 하단에 크롤링 개수 선택 슬라이더를 추가해주세요.

요구사항:
- 범위: 100개 ~ 1000개 (100개 단위)
- 기본값: 100개
- 실시간 표시: "리뷰 000개 크롤링"
- 백엔드 API의 max_reviews 파라미터와 연동

슬라이더 UI는 Flutter Slider 위젯 사용하고,
깔끔하고 직관적으로 만들어주세요.
```

#### **3단계: 3탭 구조**
```
현재 단일 화면 앱을 3탭 구조로 전환해주세요.

탭 구성:
1. 홈 (🏠): URL 입력 + 오늘의 특가 (나중에 추가)
2. 채팅 (💬): 현재 채팅 기능
3. 설정 (⚙️): 마이페이지

BottomNavigationBar 사용하고,
기존 기능들을 적절한 탭으로 분리해주세요.
```

#### **4단계: 다나와 특가 크롤링**
```
다나와 오늘의 특가 상품들을 크롤링하는 기능을 추가해주세요.

크롤링 대상:
- URL: https://m.danawa.com/leftPanel/cmPick.html
- 셀렉터: #cmPick-category-item-42124 > div > a
- 각 상품별 리뷰 100개씩 미리 수집

백엔드에 새로운 API 엔드포인트 추가:
- GET /api/v1/daily-deals - 특가 상품 목록
- POST /api/v1/precrawl - 특가 상품 리뷰 미리 크롤링

매일 1회 자동 실행되도록 스케줄링도 포함해주세요.
```

---

## ✅ **완료 기준**

### **1단계 완료시:**
- [ ] 채팅 입력시 UI 방해 없음
- [ ] URL 입력창이 상단에 위치
- [ ] 키보드 반응 자연스러움

### **2단계 완료시:**
- [ ] 슬라이더로 크롤링 개수 선택 가능
- [ ] 실제 크롤링 개수와 UI 표시 일치
- [ ] 1000개까지 크롤링 가능

### **3단계 완료시:**
- [ ] 하단에 3개 탭 네비게이션
- [ ] 각 탭별 기능 정상 동작

- [ ] 탭 전환 부드러움

### **4단계 완료시:**
- [ ] 오늘의 특가 상품 목록 표시
- [ ] 특가 상품 클릭시 즉시 채팅 가능
- [ ] 매일 자동 크롤링 동작

이제 **단계별로 차근차근 해결**해보자! 🚀